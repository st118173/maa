!function(e){"use strict";e.ajaxPrefilter(function(e){if(e.iframe)return"iframe"}),e.ajaxTransport("iframe",function(t,n,i){function r(){u.each(function(t){e(this).replaceWith(d[t]),u.splice(t,1)}),s.remove(),a.bind("load",function(){a.remove()}),a.attr("src","about:blank")}var o,s=null,a=null,l="iframe-"+e.now(),d=e(t.files).filter(":file:enabled"),u=null;if(t.dataTypes.shift(),d.length)return s=e("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:t.url,target:l}),"string"==typeof t.data&&t.data.length>0&&e.error("data must not be serialized"),e.each(t.data||{},function(t,n){e.isPlainObject(n)&&(t=n.name,n=n.value),e("<input type='hidden' />").attr({name:t,value:n}).appendTo(s)}),e("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(s),o=t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", */*; q=0.01":""):t.accepts["*"],e("<input type='hidden' name='X-Http-Accept'>").attr("value",o).appendTo(s),u=d.after(function(){return e(this).clone().prop("disabled",!0)}).next(),d.appendTo(s),{send:function(t,n){a=e("<iframe src='about:blank' name='"+l+"' id='"+l+"' style='display:none'></iframe>"),a.bind("load",function(){a.unbind("load").bind("load",function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,t=e.documentElement?e.documentElement:e.body,o=t.getElementsByTagName("textarea")[0],s=o&&o.getAttribute("data-type")||null,a=o&&o.getAttribute("data-status")||200,l=o&&o.getAttribute("data-statusText")||"OK",d={html:t.innerHTML,text:s?o.value:t?t.textContent||t.innerText:null};r(),i.responseText||(i.responseText=d.text),n(a,l,d,s?"Content-Type: "+s:null)}),s[0].submit()}),e("body").append(s,a)},abort:function(){null!==a&&(a.unbind("load").attr("src","javascript:false;"),r())}}})}(jQuery),function(e){var t;e.remotipart=t={setup:function(n){var i=n.data("ujs:submit-button"),r=e('meta[name="csrf-param"]').attr("content"),o=e('meta[name="csrf-token"]').attr("content"),s=n.find('input[name="'+r+'"]').length;n.one("ajax:beforeSend.remotipart",function(a,l,d){return delete d.beforeSend,d.iframe=!0,d.files=e(e.rails.fileInputSelector,n),d.data=n.serializeArray(),i&&d.data.push(i),d.files.each(function(e,t){for(var n=d.data.length-1;n>=0;n--)d.data[n].name==t.name&&d.data.splice(n,1)}),d.processData=!1,void 0===d.dataType&&(d.dataType="script *"),d.data.push({name:"remotipart_submitted",value:!0}),o&&r&&!s&&d.data.push({name:r,value:o}),e.rails.fire(n,"ajax:remotipartSubmit",[l,d])&&(e.rails.ajax(d).complete(function(t){e.rails.fire(n,"ajax:remotipartComplete",[t])}),setTimeout(function(){e.rails.disableFormElements(n)},20)),t.teardown(n),!1}).data("remotipartSubmitted",!0)},teardown:function(e){e.unbind("ajax:beforeSend.remotipart").removeData("remotipartSubmitted")}},e(document).on("ajax:aborted:file","form",function(){var n=e(this);return t.setup(n),e.rails.handleRemote(n),!1})}(jQuery);